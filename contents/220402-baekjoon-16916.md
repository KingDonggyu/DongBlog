---
date: '2022-04-02T15:42'
title: '[Baekjoon] 16916ë²ˆ: ë¶€ë¶„ ë¬¸ìì—´'
category: 'Algorithm'
categoryColor: '#6196cc'
tags: ['Baekjoon', 'JS', 'KMP']
---

## ğŸ” Algorithm

**KMP**

## ğŸ’» Language

**JavaScript**

## ğŸ“ Logic

**KMP** ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ì—¬ ë¶€ë¶„ ë¬¸ìì—´ì´ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.

<br />

**<span style="font-size: 22px;margin-right:10px;">1.</span> ë¨¼ì €, P(`word`)ì— ì†í•˜ëŠ” ê° ë¶€ë¶„ ë¬¸ìì—´ì˜ ì ‘ë‘ì‚¬ì™€ ì ‘ë¯¸ì‚¬ê°€ ì¼ì¹˜í•˜ëŠ” ìµœëŒ€ ê¸¸ì´ë¥¼ ì €ì¥í•˜ëŠ” í…Œì´ë¸”ì„ ìƒì„±í•œë‹¤.**

```js
function buildPatternTable(word) {
  let prefixIndex = 0;
  let suffixindex = 1;

  const patternTable = new Array(word.length).fill(0);

  while (suffixindex < word.length) {
    if (word[prefixIndex] === word[suffixindex]) {
      patternTable[suffixindex] = prefixIndex + 1;
      prefixIndex += 1;
      suffixindex += 1;
    } else if (prefixIndex === 0) {
      patternTable[suffixindex] = 0;
      suffixindex += 1;
    } else {
      prefixIndex = patternTable[prefixIndex - 1];
    }
  }

  return patternTable;
}
```

- ì•„ë˜ëŠ” ìœ„ í•¨ìˆ˜ì˜ íŒŒë¼ë¯¸í„° `word`ê°€ 'ABAABAB' ì¼ ë•Œì˜ ì˜ˆì‹œì´ë‹¤.

<table style="border-collapse: collapse; width: 36.0465%; height: 244px; margin-bottom: 10px" border="1">
    <tbody>
        <tr style="height: 30px;">
            <td style="width: 33.3333%; height: 30px; text-align: center;">i</td>
            <td style="width: 33.3333%; height: 30px; text-align: center;">ë¬¸ìì—´</td>
            <td style="width: 33.3333%; height: 30px; text-align: center;">lps[i]</td>
        </tr>
        <tr style="height: 30px;">
            <td style="width: 33.3333%; height: 30px; text-align: center;">0</td>
            <td style="width: 33.3333%; height: 30px; text-align: center;">A</td>
            <td style="width: 33.3333%; height: 30px; text-align: center;">0</td>
        </tr>
        <tr style="height: 30px;">
            <td style="width: 33.3333%; height: 30px; text-align: center;">1</td>
            <td style="width: 33.3333%; height: 30px; text-align: center;">AB</td>
            <td style="width: 33.3333%; height: 30px; text-align: center;">0</td>
        </tr>
        <tr style="height: 30px;">
            <td style="width: 33.3333%; height: 30px; text-align: center;">2</td>
            <td style="width: 33.3333%; height: 30px; text-align: center;"><span style="background-color: #f6e199;">A</span>B<span style="background-color: #9feec3;">A</span></td>
            <td style="width: 33.3333%; height: 30px; text-align: center;">1</td>
        </tr>
        <tr style="height: 30px;">
            <td style="width: 33.3333%; height: 30px; text-align: center;">3</td>
            <td style="width: 33.3333%; height: 30px; text-align: center;"><span style="background-color: #f6e199;">A</span>BA<span style="background-color: #9feec3;">A</span></td>
            <td style="width: 33.3333%; height: 30px; text-align: center;">1</td>
        </tr>
        <tr style="height: 30px;">
            <td style="width: 33.3333%; height: 30px; text-align: center;">4</td>
            <td style="width: 33.3333%; height: 30px; text-align: center;"><span style="background-color: #f6e199;">AB</span>A<span style="background-color: #9feec3;">AB</span></td>
            <td style="width: 33.3333%; height: 30px; text-align: center;">2</td>
        </tr>
        <tr style="height: 30px;">
            <td style="width: 33.3333%; height: 30px; text-align: center;">5</td>
            <td style="width: 33.3333%; height: 30px; text-align: center;"><span style="background-color: #f6e199;">ABA<span style="background-color: #9feec3;">ABA</span></span></td>
            <td style="width: 33.3333%; height: 30px; text-align: center;">3</td>
        </tr>
        <tr style="height: 34px;">
            <td style="width: 33.3333%; text-align: center; height: 34px;">6</td>
            <td style="width: 33.3333%; text-align: center; height: 34px;"><span style="background-color: #f6e199;">AB</span>AAB<span style="background-color: #9feec3;">AB</span></td>
            <td style="width: 33.3333%; text-align: center; height: 34px;">2</td>
        </tr>
    </tbody>
</table>

- ë”°ë¼ì„œ `[ 0, 0, 1, 1, 2, 3, 2 ]` ë°°ì—´ì„ ë¦¬í„´í•œë‹¤.

<br />

**<span style="font-size: 22px;margin-right:10px;">2.</span> S(`text`)ì— P(`word`)ê°€ ìˆëŠ”ì§€ `textIndex`ì™€ `wordIndex`ë¥¼ í†µí•´ íƒìƒ‰í•œë‹¤.**

```js
function solution(text, word) {
  let textIndex = 0;
  let wordIndex = 0;

  const patternTable = buildPatternTable(word);

  while (textIndex < text.length) {
    if (text[textIndex] === word[wordIndex]) {
      if (wordIndex === word.length - 1) {
        return 1;
      }
      textIndex += 1;
      wordIndex += 1;
    } else if (wordIndex > 0) {
      wordIndex = patternTable[wordIndex - 1];
    } else {
      textIndex += 1;
    }
  }

  return 0;
}
```

- `wordIndex`ê°€ `word`ì˜ ë§ˆì§€ë§‰ ì¸ë±ìŠ¤ê°€ ë  ë•Œê¹Œì§€ ë¬¸ìê°€ ê°™ìœ¼ë©´(`text[textIndex] === word[wordIndex]`) `word`ê°€ `text`ì— ë¶€ë¶„ ë¬¸ìì—´ë¡œ ì†í•˜ëŠ” ê²ƒìœ¼ë¡œ íŒë‹¨í•œë‹¤.

- ë§Œì•½ ê° ì¸ë±ìŠ¤ì˜ ìœ„ì¹˜ì— ìˆëŠ” ë¬¸ìê°€ ê°™ì§€ ì•Šìœ¼ë©° `wordIndex`ê°€ `0`ë³´ë‹¤ í´ ì‹œ, **ìƒì„±í•œ `patternTable`ì„ í†µí•´ ê²€ìƒ‰ì„ ìƒˆë¡œì´ í•´ì•¼í•˜ëŠ” ì§€ì ì„ ì–»ëŠ”ë‹¤.**

## ğŸ›  Code

```js
// ì ‘ë‘ì‚¬, ì ‘ë¯¸ì‚¬ ì¼ì¹˜ ìµœëŒ€ ê¸¸ì´ í…Œì´ë¸” ìƒì„±
function buildPatternTable(word) {
  let prefixIndex = 0;
  let suffixindex = 1;

  const patternTable = new Array(word.length).fill(0);

  while (suffixindex < word.length) {
    if (word[prefixIndex] === word[suffixindex]) {
      patternTable[suffixindex] = prefixIndex + 1;
      prefixIndex += 1;
      suffixindex += 1;
    } else if (prefixIndex === 0) {
      patternTable[suffixindex] = 0;
      suffixindex += 1;
    } else {
      prefixIndex = patternTable[prefixIndex - 1];
    }
  }

  return patternTable;
}

// KMP ì•Œê³ ë¦¬ì¦˜ ìˆ˜í–‰ (ë¬¸ìì—´ íƒìƒ‰)
function solution(text, word) {
  let textIndex = 0;
  let wordIndex = 0;

  const patternTable = buildPatternTable(word);

  while (textIndex < text.length) {
    if (text[textIndex] === word[wordIndex]) {
      if (wordIndex === word.length - 1) {
        return 1;
      }
      textIndex += 1;
      wordIndex += 1;
    } else if (wordIndex > 0) {
      wordIndex = patternTable[wordIndex - 1];
    } else {
      textIndex += 1;
    }
  }

  return 0;
}

// ì…ë ¥ 
const readline = require('readline');
const rl = readline.createInterface({
  input: process.stdin,
  output: process.stdout,
});

const input = [];
rl.on('line', (line) => {
  input.push(line);
  if (input.length == 2) rl.close();
}).on('close', () => {
  console.log(solution(...input));
  process.exit();
});
```

## ğŸ“ Review

ì²˜ìŒì—” í…ìŠ¤íŠ¸ì— ë¬¸ìê°€ ì†í•´ ìˆëŠ”ì§€ ì°¨ë¡€ëŒ€ë¡œ ìˆœíšŒí•˜ë©´ì„œ ë¹„êµí–ˆë‹¤.

ê·¸ëŸ¬ì 'ë©”ëª¨ë¦¬ ì´ˆê³¼'ê°€ ë°œìƒí–ˆê³ , ìƒê°í•´ë³´ë‹ˆ ì‹œê°„ë³µì¡ë„ ë˜í•œ ë†’ì„ ê²ƒ ê°™ì•˜ë‹¤.

ì•„ë¬´ë¦¬ ê³ ë¯¼í•´ë„ ë‹¤ë¥¸ ë°©ë²•ì´ ë– ì˜¤ë¥´ì§€ ì•Šì, ì•Œê³ ë¦¬ì¦˜ ë¶„ë¥˜ë¥¼ ë³´ë‹ˆ 'KMP'ê°€ ìˆì—ˆë‹¤.

ê²°êµ­ KMP ì•Œê³ ë¦¬ì¦˜ì— ëŒ€í•´ í•™ìŠµí•˜ê³ , ì´ë¥¼ í™œìš©í•˜ì—¬ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì—ˆë‹¤.

KMP ì•Œê³ ë¦¬ì¦˜ì€ ë‹¤ë¥¸ ê¸°ë²•ë“¤ì— ë¹„í•´ ê½¤ ì–´ë ¤ìš´ê±° ê°™ë‹¤..

<br />
<br />

## â€» Source

ğŸ–¥ https://www.acmicpc.net/problem/16916
