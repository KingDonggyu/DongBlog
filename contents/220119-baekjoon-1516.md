---
date: "2022-01-19"
title: "[Baekjoon] 1516ë²ˆ: ê²Œì„ ê°œë°œ / 1005ë²ˆ: ACM Craft"
category: "Algorithm"
categoryColor: "#6196cc"
tags: ["Baekjoon", "Python", "Sort"]
thumbnail: "./images/Baekjoon.png"
---

ë‘ ë¬¸ì œì˜ ìœ í˜•ì´ ê±°ì˜ ê°™ì•„ í•œ í¬ìŠ¤íŠ¸ì— ê¸°ë¡í–ˆë‹¤.

# ğŸ” Algorithm

### Topological Sort (ìœ„ìƒ ì •ë ¬)

# ğŸ’» Language

### Python

# ğŸ“ Logic

### Problem: <u>"Nê°œì˜ ê° ê±´ë¬¼ì´ ì™„ì„±ë˜ê¸°ê¹Œì§€ ê±¸ë¦¬ëŠ” ìµœì†Œ ì‹œê°„ì„ ì¶œë ¥í•œë‹¤."</u>

íì— ìˆëŠ” ê±´ë¬¼ë“¤ (ì§„ì…ì°¨ìˆ˜ê°€ 0ì¸ ë…¸ë“œë“¤) ì¤‘ ê±´ë¬¼ì„ ì§“ëŠ”ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì´ ì‘ì€ ê±´ë¬¼ë¶€í„° pop í•´ì•¼í•œë‹¤. 

**â¡ï¸ ìš°ì„ ìˆœìœ„ íë¥¼ ì´ìš©í•œë‹¤.**

```python
def topology_sort():
    heap = []
    for i in range(1, N+1):
        if indegree[i] == 0:
            heapq.heappush(heap, (build_time[i], i))
    
    while heap:
        time, node = heapq.heappop(heap)

        """ 1005ë²ˆ ë¬¸ì œì˜ ê²½ìš° ì•„ë˜ ì½”ë“œê°€ ì¶”ê°€ëœë‹¤. (number = node)
         if number == W:
            result.append(time)
            break
        """

        for next_node in graph[node]:
            indegree[next_node] -= 1
            if indegree[next_node] == 0:
                heapq.heappush(heap, (build_time[next_node] + time, next_node))

        build_time[node] = time
```

- `heapq` ëª¨ë“ˆì„ ì´ìš©í•œ ìš°ì„ ìˆœìœ„ íë¥¼ êµ¬í˜„í•œë‹¤.

  - `heap` ì— (ê±´ë¬¼ì„ ì§“ëŠ”ë° ê±¸ë¦¬ëŠ” ì‹œê°„, ê±´ë¬¼ ë²ˆí˜¸) íŠœí”Œì„ push ë° pop í•œë‹¤.

  - `build_time` (ê±´ë¬¼ì„ ì§“ëŠ”ë° ê±¸ë¦¬ëŠ” ì‹œê°„) ì„ íŠœí”Œì˜ ì²«ë²ˆì§¸ ì›ì†Œì— ë‘ì–´ ì‹œê°„ì´ ì ì€ ìˆœìœ¼ë¡œ pop ë˜ê²Œ í•œë‹¤.

# ğŸ›  Code

### 1516ë²ˆ: ê²Œì„ ê°œë°œ

```python
import sys, heapq


def topology_sort():
    heap = []
    for i in range(1, N+1):
        if indegree[i] == 0:
            heapq.heappush(heap, (build_time[i], i))
    
    while heap:
        time, node = heapq.heappop(heap)

        for next_node in graph[node]:
            indegree[next_node] -= 1
            if indegree[next_node] == 0:
                heapq.heappush(heap, (build_time[next_node] + time, next_node))

        build_time[node] = time


N = int(input())
build_time = [0 for _ in range(N+1)]
graph = [[] for _ in range(N+1)]
indegree = [0 for _ in range(N+1)]

for i in range(1, N+1):
    building = [int(x) for x in sys.stdin.readline().split()]
    build_time[i] = building[0]
    for j, v in enumerate(building):
        if j == 0: continue
        if v == -1: break
        graph[v].append(i)
        indegree[i] += 1

topology_sort()

for number, time in enumerate(build_time):
    if number == 0: continue
    print(time)
```

<br />

### 1005ë²ˆ: ACM Craft

```python
import sys, heapq
input = sys.stdin.readline


def topology_sort():
    heap = []
    for i in range(1, N+1):
        if indegree[i] == 0:
            heapq.heappush(heap, (build_time[i], i))

    while heap:
        time, number = heapq.heappop(heap)
        if number == W:
            result.append(time)
            break
        
        for next_number in graph[number]:
            indegree[next_number] -= 1
            if indegree[next_number] == 0:
                heapq.heappush(heap, (build_time[next_number] + time, next_number))


result = []
T = int(input())
for _ in range(T):
    N, K = map(int, input().split())
    build_time = [0] + [int(i) for i in input().split()]

    graph = [[] for _ in range(N+1)]
    indegree = [0 for _ in range(N+1)]

    for _ in range(K):
        X, Y = map(int, input().split())
        graph[X].append(Y)
        indegree[Y] += 1
    
    W = int(input())
    topology_sort()

for res in result: print(res)
```

# ğŸ“ Review

**ìš°ì„ ìˆœìœ„ í**ë¥¼ ì‰½ê²Œ ë– ì˜¬ë ¤ ê¸ˆë°© í•´ê²°í•  ìˆ˜ ìˆì—ˆë‹¤. 

í•´ê²° í›„ ë§íŒ ì‚¬ëŒë“¤ì˜ ì½”ë“œë¥¼ ë³´ë‹ˆ ëŒ€ë¶€ë¶„ **DP** ë¥¼ ì´ìš©í•˜ì—¬ ë¬¸ì œë¥¼ í‘¼ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.

ë§Œì•½ ë¬¸ì œë¥¼ í’€ê¸° ì „ ì•Œê³ ë¦¬ì¦˜ ë¶„ë¥˜ë¥¼ ë¨¼ì € ë³´ê³  ì‹œì‘í–ˆë‹¤ë©´ ë‚˜ë„ DP ë¥¼ ì´ìš©í–ˆì„ ê²ƒ ê°™ë‹¤.

ì•Œê³ ë¦¬ì¦˜ ë¶„ë¥˜ë¥¼ ë³´ì§€ ì•Šê³  ë‚´ê°€ ìƒê°í•œ ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ í•´ê²°í–ˆê¸°ì— ê¸°ë¶„ì´ ì¢‹ë‹¤.

(1516ë²ˆì„ ë¨¼ì € í‘¼ í›„ 1005ë²ˆ ë¬¸ì œë¥¼ í’€ì—ˆëŠ”ë° ë¬¸ì œì˜ ìœ í˜•ì´ ê±°ì˜ ê°™ì•„ í¬ìŠ¤íŠ¸ë¥¼ ì¬íƒ•í–ˆë‹¤ ğŸ˜…)

<br />
<br />

**â€» Source:**

https://www.acmicpc.net/problem/1516

https://www.acmicpc.net/problem/1005
